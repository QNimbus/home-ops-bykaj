---
apiVersion: v1
kind: PersistentVolume
metadata:
  name: sonarr-config-pv
spec:
  accessModes:
    - ReadWriteOnce
  capacity:
    storage: 5Gi
  csi:
    driver: rbd.csi.ceph.com
    fsType: ext4
    # nodeStageSecretRef:
    #   # node stage secret name
    #   name: csi-rbd-secret
    #   # node stage secret namespace where above secret is created
    #   namespace: default
    volumeAttributes:
      # Required options from storageclass parameters need to be added in volumeAttributes
      clusterID: "${CEPH_CLUSTER_ID}"
      pool: "ceph-blockpool"
      staticVolume: "true"
      imageFeatures: "layering"
    # volumeHandle should be same as rbd image name
    volumeHandle: sonarr-config
  persistentVolumeReclaimPolicy: Retain
  storageClassName: ceph-block
  # The volumeMode can be either `Filesystem` or `Block` if you are creating Filesystem PVC it should be `Filesystem`, if you are creating Block PV you need to change it to `Block`
  volumeMode: Block